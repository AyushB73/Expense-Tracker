<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Expense Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css?v=2">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- jsPDF library for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <i class="fas fa-hard-hat"></i>
                <h1>Expense Tracker</h1>
                <p id="login-subtitle">Admin Login Required</p>
            </div>
            
            <!-- Login Form -->
            <form id="login-form" class="login-form" style="display: block;">
                <div class="form-group">
                    <label for="username">
                        <i class="fas fa-user"></i>
                        Username
                    </label>
                    <input type="text" id="username" required autocomplete="username" placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label for="password">
                        <i class="fas fa-lock"></i>
                        Password
                    </label>
                    <input type="password" id="password" required autocomplete="current-password" placeholder="Enter your password">
                </div>
                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    Login
                </button>
                <div id="login-error" class="login-error" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    Invalid credentials. Please try again.
                </div>
                <div class="login-links">
                    <button type="button" id="show-register-btn" class="link-btn">
                        <i class="fas fa-user-plus"></i>
                        Create New Account
                    </button>
                    <button type="button" id="show-forgot-btn" class="link-btn">
                        <i class="fas fa-key"></i>
                        Forgot Password?
                    </button>
                </div>
            </form>
            
            <!-- Registration Form -->
            <form id="register-form" class="login-form" style="display: none;">
                <div class="form-group">
                    <label for="reg-username">
                        <i class="fas fa-user"></i>
                        Username
                    </label>
                    <input type="text" id="reg-username" required placeholder="Choose a username">
                </div>
                <div class="form-group">
                    <label for="reg-password">
                        <i class="fas fa-lock"></i>
                        Password
                    </label>
                    <input type="password" id="reg-password" required placeholder="Choose a password">
                </div>
                <div class="form-group">
                    <label for="reg-confirm-password">
                        <i class="fas fa-lock"></i>
                        Confirm Password
                    </label>
                    <input type="password" id="reg-confirm-password" required placeholder="Confirm your password">
                </div>
                <div class="form-group">
                    <label for="reg-email">
                        <i class="fas fa-envelope"></i>
                        Email (for password recovery)
                    </label>
                    <input type="email" id="reg-email" required placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="reg-company">
                        <i class="fas fa-building"></i>
                        Company Name
                    </label>
                    <input type="text" id="reg-company" required placeholder="Enter company name">
                </div>
                <button type="submit" class="login-btn">
                    <i class="fas fa-user-plus"></i>
                    Create Account
                </button>
                <div id="register-error" class="login-error" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span id="register-error-text">Registration failed. Please try again.</span>
                </div>
                <div class="login-links">
                    <button type="button" id="show-login-btn" class="link-btn">
                        <i class="fas fa-sign-in-alt"></i>
                        Back to Login
                    </button>
                </div>
            </form>
            
            <!-- Forgot Password Form -->
            <form id="forgot-form" class="login-form" style="display: none;">
                <div class="form-group">
                    <label for="forgot-username">
                        <i class="fas fa-user"></i>
                        Username
                    </label>
                    <input type="text" id="forgot-username" required placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label for="forgot-email">
                        <i class="fas fa-envelope"></i>
                        Email
                    </label>
                    <input type="email" id="forgot-email" required placeholder="Enter your registered email">
                </div>
                <button type="submit" class="login-btn">
                    <i class="fas fa-key"></i>
                    Reset Password
                </button>
                <div id="forgot-error" class="login-error" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span id="forgot-error-text">User not found or email doesn't match.</span>
                </div>
                <div id="forgot-success" class="login-success" style="display: none;">
                    <i class="fas fa-check-circle"></i>
                    <span id="forgot-success-text">Password reset successful! You can now login with your new password.</span>
                </div>
                <div class="login-links">
                    <button type="button" id="back-to-login-btn" class="link-btn">
                        <i class="fas fa-sign-in-alt"></i>
                        Back to Login
                    </button>
                </div>
            </form>
            
            <!-- Password Reset Form -->
            <form id="reset-form" class="login-form" style="display: none;">
                <div class="form-group">
                    <label for="new-password">
                        <i class="fas fa-lock"></i>
                        New Password
                    </label>
                    <input type="password" id="new-password" required placeholder="Enter new password">
                </div>
                <div class="form-group">
                    <label for="confirm-new-password">
                        <i class="fas fa-lock"></i>
                        Confirm New Password
                    </label>
                    <input type="password" id="confirm-new-password" required placeholder="Confirm new password">
                </div>
                <button type="submit" class="login-btn">
                    <i class="fas fa-save"></i>
                    Update Password
                </button>
                <div id="reset-error" class="login-error" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span id="reset-error-text">Passwords don't match.</span>
                </div>
            </form>
            
            <div class="login-info">
                <p><strong>Demo Account:</strong></p>
                <p>Username: <code>admin</code></p>
                <p>Password: <code>construction123</code></p>
                <p><em>Or create your own account above</em></p>
            </div>
        </div>
    </div>

    <!-- Main Application (hidden by default) -->
    <div id="main-app" class="container" style="display: none;">
        <header>
            <div class="header-content">
                <h1><i class="fas fa-hard-hat"></i> <span id="company-name-header">Construction</span> Expense Tracker</h1>
                <button type="button" id="logout-btn" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </button>
            </div>
            <div class="summary-cards">
                <div class="card">
                    <h3>Total Expenses/Receivables</h3>
                    <span id="total-debits">₹0.00</span>
                </div>
                <div class="card">
                    <h3>Total Payments Made</h3>
                    <span id="total-credits">₹0.00</span>
                </div>
                <div class="card">
                    <h3>Outstanding Balance</h3>
                    <span id="net-balance">₹0.00</span>
                </div>
                <div class="card expense-count">
                    <h3>Total Entries</h3>
                    <span id="expense-count">0</span>
                </div>
                <div class="card site-filter">
                    <h3>Current View</h3>
                    <select id="site-filter-summary">
                        <option value="">All Sites</option>
                    </select>
                </div>
                <div class="card" id="budget-summary" style="display: none;">
                    <h3>Budget Status</h3>
                    <div class="budget-status">
                        <div class="budget-info">
                            <small>Budget: <span id="budget-amount">₹0.00</span></small>
                            <small>Remaining: <span id="remaining-amount">₹0.00</span></small>
                        </div>
                        <div class="budget-progress">
                            <div class="progress-bar">
                                <div id="progress-fill" class="progress-fill"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main>
            <section class="expense-form">
                <h2>Add New Transaction</h2>
                <form id="expense-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="site-project">Site/Project *</label>
                            <div class="site-input-group">
                                <select id="site-select">
                                    <option value="">Select Site/Project</option>
                                    <option value="add-new">+ Add New Site/Project</option>
                                </select>
                                <input type="text" id="site-name" placeholder="Or type site name" style="display: none;">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="transaction-type">Transaction Type</label>
                            <select id="transaction-type" required>
                                <option value="debit">Material/Service Received (Debit)</option>
                                <option value="credit">Payment Made to Vendor (Credit)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="description">Description</label>
                            <input type="text" id="description" required>
                        </div>
                        <div class="form-group">
                            <label for="amount">Amount (₹)</label>
                            <input type="number" id="amount" step="0.01" required>
                        </div>
                    </div>
                    
                    <!-- Quick Site Add Form (Hidden by default) -->
                    <div class="form-row site-quick-add" id="site-quick-add" style="display: none;">
                        <div class="site-quick-header">
                            <h4><i class="fas fa-building"></i> Add New Site/Project</h4>
                            <button type="button" id="cancel-quick-site" class="close-btn">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="quick-site-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="quick-site-name">Site/Project Name *</label>
                                    <input type="text" id="quick-site-name" required placeholder="Enter site/project name">
                                </div>
                                <div class="form-group">
                                    <label for="quick-site-location">Location</label>
                                    <input type="text" id="quick-site-location" placeholder="Enter location">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="quick-site-client">Client Name</label>
                                    <input type="text" id="quick-site-client" placeholder="Enter client name">
                                </div>
                                <div class="form-group">
                                    <label for="quick-site-budget">Project Budget (₹)</label>
                                    <input type="number" id="quick-site-budget" step="0.01" placeholder="Enter project budget">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="quick-site-start-date">Start Date</label>
                                    <input type="date" id="quick-site-start-date">
                                </div>
                                <div class="form-group">
                                    <label for="quick-site-end-date">Expected End Date</label>
                                    <input type="date" id="quick-site-end-date">
                                </div>
                            </div>
                            <div class="quick-site-actions">
                                <button type="button" id="save-quick-site" class="primary-btn">
                                    <i class="fas fa-save"></i> Save & Select Site
                                </button>
                                <button type="button" id="cancel-quick-site-btn" class="secondary-btn">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="quantity">Quantity</label>
                            <input type="number" id="quantity" step="0.01" min="0" placeholder="Enter quantity">
                        </div>
                        <div class="form-group">
                            <label for="unit">Unit</label>
                            <select id="unit">
                                <option value="">Select Unit</option>
                                <optgroup label="Length/Distance">
                                    <option value="mm">Millimeter (mm)</option>
                                    <option value="cm">Centimeter (cm)</option>
                                    <option value="m">Meter (m)</option>
                                    <option value="km">Kilometer (km)</option>
                                    <option value="ft">Feet (ft)</option>
                                    <option value="inch">Inch (in)</option>
                                </optgroup>
                                <optgroup label="Area">
                                    <option value="sqm">Square Meter (sq.m)</option>
                                    <option value="sqft">Square Feet (sq.ft)</option>
                                    <option value="acre">Acre</option>
                                </optgroup>
                                <optgroup label="Volume">
                                    <option value="cum">Cubic Meter (cu.m)</option>
                                    <option value="cuft">Cubic Feet (cu.ft)</option>
                                    <option value="liter">Liter (L)</option>
                                </optgroup>
                                <optgroup label="Weight">
                                    <option value="kg">Kilogram (kg)</option>
                                    <option value="ton">Ton (t)</option>
                                    <option value="quintal">Quintal (q)</option>
                                    <option value="lb">Pound (lb)</option>
                                </optgroup>
                                <optgroup label="Count/Quantity">
                                    <option value="nos">Numbers (nos)</option>
                                    <option value="pcs">Pieces (pcs)</option>
                                    <option value="set">Set</option>
                                    <option value="pair">Pair</option>
                                    <option value="dozen">Dozen</option>
                                    <option value="bundle">Bundle</option>
                                    <option value="bag">Bag</option>
                                    <option value="box">Box</option>
                                </optgroup>
                                <optgroup label="Time">
                                    <option value="hour">Hour (hr)</option>
                                    <option value="day">Day</option>
                                    <option value="week">Week</option>
                                    <option value="month">Month</option>
                                </optgroup>
                                <optgroup label="Other">
                                    <option value="lot">Lot</option>
                                    <option value="job">Job</option>
                                    <option value="service">Service</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="category">Category</label>
                            <select id="category" required>
                                <option value="">Select Category</option>
                                <option value="materials">Materials</option>
                                <option value="labor">Labor</option>
                                <option value="equipment">Equipment</option>
                                <option value="permits">Permits & Licenses</option>
                                <option value="utilities">Utilities</option>
                                <option value="transportation">Transportation</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="date">Date</label>
                            <input type="date" id="date" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vendor">Vendor/Supplier</label>
                            <div class="vendor-input-group">
                                <select id="vendor-select">
                                    <option value="">Select Vendor</option>
                                    <option value="new">+ Add New Vendor</option>
                                </select>
                                <input type="text" id="vendor" placeholder="Or type vendor name" style="display: none;">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="project-phase">Project Phase</label>
                            <select id="project-phase">
                                <option value="">Select Phase</option>
                                <option value="foundation">Foundation</option>
                                <option value="framing">Framing</option>
                                <option value="roofing">Roofing</option>
                                <option value="electrical">Electrical</option>
                                <option value="plumbing">Plumbing</option>
                                <option value="finishing">Finishing</option>
                                <option value="others">Others</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Quick Vendor Add Form (Hidden by default) -->
                    <div class="form-row vendor-quick-add" id="vendor-quick-add" style="display: none;">
                        <div class="vendor-quick-header">
                            <h4><i class="fas fa-user-plus"></i> Add New Vendor</h4>
                            <button type="button" id="cancel-quick-vendor" class="close-btn">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="quick-vendor-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="quick-vendor-name">Vendor Name *</label>
                                    <input type="text" id="quick-vendor-name" required>
                                </div>
                                <div class="form-group">
                                    <label for="quick-vendor-contact">Contact Number</label>
                                    <input type="tel" id="quick-vendor-contact" placeholder="Enter phone number">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="quick-vendor-email">Email</label>
                                    <input type="email" id="quick-vendor-email" placeholder="Enter email address">
                                </div>
                                <div class="form-group">
                                    <label for="quick-vendor-address">Address</label>
                                    <input type="text" id="quick-vendor-address" placeholder="Enter address">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="quick-vendor-gst">GST Number</label>
                                    <input type="text" id="quick-vendor-gst" placeholder="Enter GST number">
                                </div>
                                <div class="form-group">
                                    <label for="quick-vendor-pan">PAN Number</label>
                                    <input type="text" id="quick-vendor-pan" placeholder="Enter PAN number">
                                </div>
                            </div>
                            <div class="quick-vendor-actions">
                                <button type="button" id="save-quick-vendor" class="primary-btn">
                                    <i class="fas fa-save"></i> Save & Select Vendor
                                </button>
                                <button type="button" id="cancel-quick-vendor-btn" class="secondary-btn">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-row payment-details" id="payment-details" style="display: none;">
                        <div class="form-group">
                            <label for="payment-mode">Payment Mode</label>
                            <select id="payment-mode">
                                <option value="">Select Payment Mode</option>
                                <option value="cash">Cash</option>
                                <option value="cheque">Cheque</option>
                                <option value="neft">NEFT</option>
                                <option value="rtgs">RTGS</option>
                                <option value="upi">UPI</option>
                                <option value="imps">IMPS</option>
                                <option value="card">Card Payment</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="bank-account">Bank Account</label>
                            <select id="bank-account">
                                <option value="">Select Bank Account</option>
                                <option value="sbi-current">SBI Current A/c - ****1234</option>
                                <option value="hdfc-current">HDFC Current A/c - ****5678</option>
                                <option value="icici-savings">ICICI Savings A/c - ****9012</option>
                                <option value="axis-current">Axis Current A/c - ****3456</option>
                                <option value="add-new">+ Add New Bank Account</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row payment-details" id="payment-reference" style="display: none;">
                        <div class="form-group">
                            <label for="payment-reference-no">Payment Reference/Cheque No.</label>
                            <input type="text" id="payment-reference-no" placeholder="Enter reference number">
                        </div>
                        <div class="form-group">
                            <label for="payment-number">Payment Number</label>
                            <input type="text" id="payment-number" readonly placeholder="Auto-generated">
                        </div>
                    </div>
                    
                    <!-- Quick Bank Account Add Form (Hidden by default) -->
                    <div class="form-row bank-quick-add" id="bank-quick-add" style="display: none;">
                        <div class="bank-quick-header">
                            <h4><i class="fas fa-university"></i> Add New Bank Account</h4>
                            <button type="button" id="cancel-quick-bank" class="close-btn">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="quick-bank-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="quick-bank-name">Bank Name *</label>
                                    <input type="text" id="quick-bank-name" required placeholder="Enter bank name">
                                </div>
                                <div class="form-group">
                                    <label for="quick-account-type">Account Type *</label>
                                    <select id="quick-account-type" required>
                                        <option value="">Select Type</option>
                                        <option value="current">Current Account</option>
                                        <option value="savings">Savings Account</option>
                                        <option value="cc">Cash Credit</option>
                                        <option value="od">Overdraft</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="quick-account-number">Account Number *</label>
                                    <input type="text" id="quick-account-number" required placeholder="Enter account number">
                                </div>
                                <div class="form-group">
                                    <label for="quick-ifsc-code">IFSC Code *</label>
                                    <input type="text" id="quick-ifsc-code" required placeholder="Enter IFSC code">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="quick-branch-name">Branch Name</label>
                                    <input type="text" id="quick-branch-name" placeholder="Enter branch name">
                                </div>
                                <div class="form-group">
                                    <label for="quick-account-holder">Account Holder Name</label>
                                    <input type="text" id="quick-account-holder" placeholder="Enter account holder name">
                                </div>
                            </div>
                            <div class="quick-bank-actions">
                                <button type="button" id="save-quick-bank" class="primary-btn">
                                    <i class="fas fa-save"></i> Save & Select Account
                                </button>
                                <button type="button" id="cancel-quick-bank-btn" class="secondary-btn">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- Add Transaction Button -->
                    <button type="button" id="add-transaction-btn" class="add-transaction-btn">
                        <i class="fas fa-plus"></i> Add Transaction
                    </button>
                </form>
            </section>

            <section class="budget-section" style="display: none;" id="budget-section">
                <div class="budget-header">
                    <h2>Budget Management</h2>
                    <button type="button" id="disable-budget-btn" class="secondary-btn">
                        <i class="fas fa-times"></i> Disable Budget Tracking
                    </button>
                </div>
                <div class="budget-form">
                    <label for="budget-input">Set Total Budget (₹)</label>
                    <div class="budget-input-group">
                        <input type="number" id="budget-input" step="0.01" placeholder="Enter total budget">
                        <button type="button" id="set-budget-btn"><i class="fas fa-save"></i> Set Budget</button>
                    </div>
                </div>
            </section>

            <section class="budget-toggle" id="budget-toggle">
                <div class="toggle-content">
                    <h3><i class="fas fa-chart-line"></i> Want to track your budget?</h3>
                    <p>Enable budget tracking to monitor your spending against a set budget limit.</p>
                    <button type="button" id="enable-budget-btn" class="enable-btn">
                        <i class="fas fa-plus"></i> Enable Budget Tracking
                    </button>
                </div>
            </section>

            <section class="expenses-list">
                <div class="list-header">
                    <h2>Transaction History</h2>
                    <div class="filters">
                        <select id="site-filter">
                            <option value="">All Sites</option>
                        </select>
                        <select id="category-filter">
                            <option value="">All Categories</option>
                            <option value="materials">Materials</option>
                            <option value="labor">Labor</option>
                            <option value="equipment">Equipment</option>
                            <option value="permits">Permits & Licenses</option>
                            <option value="utilities">Utilities</option>
                            <option value="transportation">Transportation</option>
                            <option value="other">Other</option>
                        </select>
                        <button type="button" id="export-btn"><i class="fas fa-download"></i> Export CSV</button>
                        <button type="button" id="export-pdf-btn" class="pdf-export-btn"><i class="fas fa-file-pdf"></i> Export PDF</button>
                    </div>
                </div>
                <div class="expenses-table">
                    <table id="expenses-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Site/Project</th>
                                <th>Type</th>
                                <th>Description</th>
                                <th>Vendor</th>
                                <th>Payment Mode</th>
                                <th>Payment No.</th>
                                <th>Expense/Receivable (₹)</th>
                                <th>Payment Made (₹)</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="expenses-tbody">
                            <!-- Expenses will be populated here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Vendor Management Section -->
            <section class="vendor-management grey-box">
                <div class="vendor-header">
                    <h2><i class="fas fa-users"></i> Vendor Management</h2>
                    <div class="vendor-actions">
                        <button type="button" id="add-vendor-btn" class="secondary-btn">
                            <i class="fas fa-plus"></i> Add New Vendor
                        </button>
                        <button type="button" id="vendor-summary-btn" class="secondary-btn">
                            <i class="fas fa-chart-bar"></i> Vendor Summary
                        </button>
                    </div>
                </div>
                
                <!-- Add Vendor Form (Hidden by default) -->
                <div id="add-vendor-form" class="vendor-form" style="display: none;">
                    <h3>Add New Vendor</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vendor-name">Vendor Name *</label>
                            <input type="text" id="vendor-name" required>
                        </div>
                        <div class="form-group">
                            <label for="vendor-contact">Contact Number</label>
                            <input type="tel" id="vendor-contact">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vendor-email">Email</label>
                            <input type="email" id="vendor-email">
                        </div>
                        <div class="form-group">
                            <label for="vendor-address">Address</label>
                            <input type="text" id="vendor-address">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vendor-gst">GST Number</label>
                            <input type="text" id="vendor-gst" placeholder="Enter GST number">
                        </div>
                        <div class="form-group">
                            <label for="vendor-pan">PAN Number</label>
                            <input type="text" id="vendor-pan" placeholder="Enter PAN number">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vendor-bank-name">Bank Name</label>
                            <input type="text" id="vendor-bank-name" placeholder="Enter bank name">
                        </div>
                        <div class="form-group">
                            <label for="vendor-account-number">Account Number</label>
                            <input type="text" id="vendor-account-number" placeholder="Enter account number">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vendor-ifsc">IFSC Code</label>
                            <input type="text" id="vendor-ifsc" placeholder="Enter IFSC code">
                        </div>
                        <div class="form-group">
                            <label for="vendor-category">Vendor Category</label>
                            <select id="vendor-category">
                                <option value="">Select Category</option>
                                <option value="material-supplier">Material Supplier</option>
                                <option value="contractor">Contractor</option>
                                <option value="service-provider">Service Provider</option>
                                <option value="equipment-rental">Equipment Rental</option>
                                <option value="consultant">Consultant</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" id="save-vendor-btn">
                            <i class="fas fa-save"></i> Save Vendor
                        </button>
                        <button type="button" id="cancel-vendor-btn" class="secondary-btn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>

                <!-- Vendor List -->
                <div class="vendor-list">
                    <div class="vendor-grid" id="vendor-grid">
                        <!-- Vendor cards will be populated here -->
                    </div>
                </div>
            </section>

            <!-- Bank Account Management Section -->
            <section class="bank-management grey-box">
                <div class="section-header-wrapper">
                    <h2><i class="fas fa-university"></i> Bank Account Management</h2>
                    <div class="section-actions">
                        <button type="button" id="manage-banks-btn" class="secondary-btn">
                            <i class="fas fa-cog"></i> Manage Bank Accounts
                        </button>
                    </div>
                </div>
            </section>

            <!-- Site/Project Management Section -->
            <section class="site-management grey-box">
                <div class="section-header-wrapper">
                    <h2><i class="fas fa-building"></i> Site/Project Management</h2>
                    <div class="section-actions">
                        <button type="button" id="manage-sites-btn" class="secondary-btn">
                            <i class="fas fa-cog"></i> Manage Sites
                        </button>
                        <button type="button" id="site-reports-btn" class="secondary-btn">
                            <i class="fas fa-chart-line"></i> Site Reports
                        </button>
                    </div>
                </div>
            </section>

            <!-- Vendor Details Modal -->
            <div id="vendor-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="modal-vendor-name">Vendor Details</h3>
                        <div class="modal-header-actions">
                            <button type="button" id="edit-vendor-btn" class="edit-btn">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button type="button" class="close-modal" id="close-vendor-modal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="modal-body">
                        <div class="vendor-info">
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>Contact:</label>
                                    <span id="modal-vendor-contact">-</span>
                                </div>
                                <div class="info-item">
                                    <label>Email:</label>
                                    <span id="modal-vendor-email">-</span>
                                </div>
                                <div class="info-item">
                                    <label>Address:</label>
                                    <span id="modal-vendor-address">-</span>
                                </div>
                                <div class="info-item">
                                    <label>GST Number:</label>
                                    <span id="modal-vendor-gst">-</span>
                                </div>
                                <div class="info-item">
                                    <label>PAN Number:</label>
                                    <span id="modal-vendor-pan">-</span>
                                </div>
                                <div class="info-item">
                                    <label>Category:</label>
                                    <span id="modal-vendor-category">-</span>
                                </div>
                                <div class="info-item">
                                    <label>Bank Name:</label>
                                    <span id="modal-vendor-bank">-</span>
                                </div>
                                <div class="info-item">
                                    <label>Account Number:</label>
                                    <span id="modal-vendor-account">-</span>
                                </div>
                                <div class="info-item">
                                    <label>IFSC Code:</label>
                                    <span id="modal-vendor-ifsc">-</span>
                                </div>
                                <div class="info-item">
                                    <label>Total Expenses/Receivables:</label>
                                    <span id="modal-vendor-debits" class="amount debit">₹0.00</span>
                                </div>
                                <div class="info-item">
                                    <label>Total Payments Made:</label>
                                    <span id="modal-vendor-credits" class="amount credit">₹0.00</span>
                                </div>
                                <div class="info-item">
                                    <label>Outstanding Balance:</label>
                                    <span id="modal-vendor-balance" class="amount">₹0.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="vendor-expenses">
                            <h4>Transaction History</h4>
                            <div class="vendor-expenses-table">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Type</th>
                                            <th>Description</th>
                                            <th>Payment Mode</th>
                                            <th>Payment No.</th>
                                            <th>Expense (₹)</th>
                                            <th>Payment Made (₹)</th>
                                        </tr>
                                    </thead>
                                    <tbody id="modal-vendor-expenses">
                                        <!-- Vendor expenses will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Vendor Edit Modal -->
    <div id="vendor-edit-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Vendor Details</h3>
                <button type="button" class="close-modal" id="close-vendor-edit-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="edit-vendor-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-vendor-name">Vendor Name *</label>
                            <input type="text" id="edit-vendor-name" required readonly>
                        </div>
                        <div class="form-group">
                            <label for="edit-vendor-contact">Contact Number</label>
                            <input type="tel" id="edit-vendor-contact">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-vendor-email">Email</label>
                            <input type="email" id="edit-vendor-email">
                        </div>
                        <div class="form-group">
                            <label for="edit-vendor-address">Address</label>
                            <input type="text" id="edit-vendor-address">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-vendor-gst">GST Number</label>
                            <input type="text" id="edit-vendor-gst">
                        </div>
                        <div class="form-group">
                            <label for="edit-vendor-pan">PAN Number</label>
                            <input type="text" id="edit-vendor-pan">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-vendor-bank-name">Bank Name</label>
                            <input type="text" id="edit-vendor-bank-name">
                        </div>
                        <div class="form-group">
                            <label for="edit-vendor-account-number">Account Number</label>
                            <input type="text" id="edit-vendor-account-number">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-vendor-ifsc">IFSC Code</label>
                            <input type="text" id="edit-vendor-ifsc">
                        </div>
                        <div class="form-group">
                            <label for="edit-vendor-category">Vendor Category</label>
                            <select id="edit-vendor-category">
                                <option value="">Select Category</option>
                                <option value="material-supplier">Material Supplier</option>
                                <option value="contractor">Contractor</option>
                                <option value="service-provider">Service Provider</option>
                                <option value="equipment-rental">Equipment Rental</option>
                                <option value="consultant">Consultant</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" id="update-vendor-btn" class="primary-btn">
                            <i class="fas fa-save"></i> Update Vendor
                        </button>
                        <button type="button" id="cancel-vendor-edit-btn" class="secondary-btn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bank Management Modal -->
    <div id="bank-management-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Bank Account Management</h3>
                <button type="button" class="close-modal" id="close-bank-management-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="bank-management-content">
                    <div class="bank-actions">
                        <button type="button" id="add-bank-account-btn" class="primary-btn">
                            <i class="fas fa-plus"></i> Add New Bank Account
                        </button>
                        <button type="button" id="delete-all-banks-btn" class="danger-btn">
                            <i class="fas fa-trash-alt"></i> Delete All Accounts
                        </button>
                    </div>
                    
                    <!-- Bank Account Form (Hidden by default) -->
                    <div id="bank-account-form-container" class="bank-account-form" style="display: none;">
                        <div class="form-header">
                            <h4 id="bank-form-title">Add New Bank Account</h4>
                        </div>
                        <div class="form-content">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="bank-form-name">Bank Name *</label>
                                    <input type="text" id="bank-form-name" required placeholder="Enter bank name">
                                </div>
                                <div class="form-group">
                                    <label for="bank-form-type">Account Type *</label>
                                    <select id="bank-form-type" required>
                                        <option value="">Select Type</option>
                                        <option value="current">Current Account</option>
                                        <option value="savings">Savings Account</option>
                                        <option value="cc">Cash Credit</option>
                                        <option value="od">Overdraft</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="bank-form-number">Account Number *</label>
                                    <input type="text" id="bank-form-number" required placeholder="Enter account number">
                                </div>
                                <div class="form-group">
                                    <label for="bank-form-ifsc">IFSC Code *</label>
                                    <input type="text" id="bank-form-ifsc" required placeholder="Enter IFSC code">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="bank-form-branch">Branch Name</label>
                                    <input type="text" id="bank-form-branch" placeholder="Enter branch name">
                                </div>
                                <div class="form-group">
                                    <label for="bank-form-holder">Account Holder Name</label>
                                    <input type="text" id="bank-form-holder" placeholder="Enter account holder name">
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="button" id="save-bank-account-btn" class="primary-btn">
                                    <i class="fas fa-save"></i> Add Account
                                </button>
                                <button type="button" id="cancel-bank-account-btn" class="secondary-btn">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bank-accounts-grid" id="bank-accounts-grid">
                        <!-- Bank accounts will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Vendor Summary Modal -->
    <div id="vendor-summary-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Vendor Summary Report</h3>
                <button type="button" class="close-modal" id="close-vendor-summary-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="summary-stats">
                    <div class="stat-card">
                        <h4>Total Vendors</h4>
                        <span id="total-vendors-count">0</span>
                    </div>
                    <div class="stat-card">
                        <h4>Total Outstanding</h4>
                        <span id="total-outstanding-amount">₹0.00</span>
                    </div>
                    <div class="stat-card">
                        <h4>Total Transactions</h4>
                        <span id="total-transactions-count">0</span>
                    </div>
                </div>
                <div class="vendor-summary-table">
                    <h4>Vendor Breakdown</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Vendor Name</th>
                                <th>Category</th>
                                <th>Transactions</th>
                                <th>Total Expenses</th>
                                <th>Total Paid</th>
                                <th>Outstanding</th>
                            </tr>
                        </thead>
                        <tbody id="vendor-summary-tbody">
                            <!-- Vendor summary will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Site Management Modal -->
    <div id="site-management-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Site/Project Management</h3>
                <button type="button" class="close-modal" id="close-site-management-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="site-management-content">
                    <div class="site-actions">
                        <button type="button" id="add-site-btn" class="primary-btn">
                            <i class="fas fa-plus"></i> Add New Site/Project
                        </button>
                    </div>
                    <div class="sites-grid" id="sites-grid">
                        <!-- Sites will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Site Reports Modal -->
    <div id="site-reports-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Site-wise Expense Reports</h3>
                <button type="button" class="close-modal" id="close-site-reports-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="site-reports-content">
                    <div class="overall-stats">
                        <div class="stat-card">
                            <h4>Total Sites</h4>
                            <span id="total-sites-count">0</span>
                        </div>
                        <div class="stat-card">
                            <h4>Overall Expenses</h4>
                            <span id="overall-expenses-amount">₹0.00</span>
                        </div>
                        <div class="stat-card">
                            <h4>Overall Payments</h4>
                            <span id="overall-payments-amount">₹0.00</span>
                        </div>
                        <div class="stat-card">
                            <h4>Overall Outstanding</h4>
                            <span id="overall-outstanding-amount">₹0.00</span>
                        </div>
                    </div>
                    <div class="site-reports-table">
                        <h4>Site-wise Breakdown</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>Site/Project</th>
                                    <th>Location</th>
                                    <th>Client</th>
                                    <th>Budget</th>
                                    <th>Expenses</th>
                                    <th>Payments</th>
                                    <th>Outstanding</th>
                                    <th>Budget Used</th>
                                </tr>
                            </thead>
                            <tbody id="site-reports-tbody">
                                <!-- Site reports will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Site Modal -->
    <div id="edit-site-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> Edit Site/Project</h3>
                <button type="button" class="close-modal" id="close-edit-site-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="edit-site-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-site-name">Site/Project Name *</label>
                            <input type="text" id="edit-site-name" required placeholder="Enter site/project name">
                        </div>
                        <div class="form-group">
                            <label for="edit-site-location">Location</label>
                            <input type="text" id="edit-site-location" placeholder="Enter location">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-site-client">Client Name</label>
                            <input type="text" id="edit-site-client" placeholder="Enter client name">
                        </div>
                        <div class="form-group">
                            <label for="edit-site-budget">Project Budget (₹)</label>
                            <input type="number" id="edit-site-budget" step="0.01" placeholder="Enter project budget">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-site-start-date">Start Date</label>
                            <input type="date" id="edit-site-start-date">
                        </div>
                        <div class="form-group">
                            <label for="edit-site-end-date">Expected End Date</label>
                            <input type="date" id="edit-site-end-date">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-site-status">Status</label>
                            <select id="edit-site-status">
                                <option value="active">Active</option>
                                <option value="on-hold">On Hold</option>
                                <option value="completed">Completed</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="primary-btn">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                        <button type="button" id="cancel-edit-site" class="secondary-btn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button type="button" id="delete-site-btn" class="danger-btn" style="margin-left: auto;">
                            <i class="fas fa-trash"></i> Delete Site
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="api-client.js"></script>
    <script src="script.js"></script>
</body>
</html>